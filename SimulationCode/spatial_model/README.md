This folder contains an implementation of a spatial model of antibiotic-mediated interactions in microbial communities.

# Scripts   

1. `eco_dyn.py` contains the model. It is split into sections, separated by hashes.  Description:
`Section 1 (Strain Class Definition)` defines a strain as a Python class with the required attributes.   
`Section 1 (Config Parameters)` contains the parameters values, and any changes to these values must be made only here.  
`Section 2 (Functions and Model Definitions)` contains the definitions of functions and classes that are used during the simulation.   
`Section 3 (Run Model)` executes the commands required to perform the simulation. 

usage: eco-dyn.py [-h] -kd K_D -kp K_P [-ss SAVE_SNAPSHOTS] [-sm SAVE_MOVIE] [-v VERBOSE]

Individual-based spatial model of antibitic-mediated interactions.

optional arguments:
  -h, --help            show this help message and exit.  
  -kd K_D, --kd K_D     K_D, the diffusivity of degrader molecules.  
  -kp K_P, --kp K_P     K_P, the diffusitivity of antibiotic molecules.  
  -ss SAVE_SNAPSHOTS, --ss SAVE_SNAPSHOTS
                        Binary, do you want to save snapshots after each lattice update? Requires a good amount of memory space.  
  -sm SAVE_MOVIE, --sm SAVE_MOVIE
                        Binary, do you want to save snapshots after each lattice update? Requires a good amount of memory space.  
  -v VERBOSE, --v VERBOSE
                        Binary, prints a line stating the number of generations completed after every lattice update. Note that if you are running this simulation on a cluster, the output files will likely take up more
                        space than expected if this flag is set to true.  

2. `analyse-spatial-model.py` analyses the results of the simulation and outputs a KP-KD plane coloured by the composition of the population at the end of the simulation. More information can be found in the script itself. 

# Folders

Each job is given a `jobname` in the Config Parameters section of `eco-dyn.py` which is used as an identifier for all data that is derived from this job. More specifically, one job can be thought of as a simulation of the population dynamics for a fixed set of parameter values and community type.  

`./Results` contains the results of each job. There are three subfolders inside ./Results:   

Note: Folders 1 and 2 below have one subfolder for each job since there are multiple files derived from each job. The third subfolder will have only one file for each job, and hence does not have this subdivision. 

1. `./Results/simulation_snapshots` contains a folder for each community type. These folders contain subfolders for each job (parameter combination) simulated for that community. The subsubfolders contain a picture of the lattice taken after every generation, which is a record of how the simulations progress. Each fixed parameter set is simulated a number of times to account for the stochasticity due to finiteness of populations, so the subsubfolder will have snapshots of each generation for each simulation run. The number of snapshots saved after a given job is no_runs x update_iterations. 

2. `./Results/simulation_movies` contains movies that have been created from the snapshots of a certain job using the corresponding subfolder in simulation_snapshots. This is only for the purposes of visualisation and hence only the run having index 0 (indices are arbitrarily assigned) is used. One movie is made for each parameter set. 

3. `./Results/simulation_statistics` contains one folder for each community type. There is one subfolder for each parameter set simulated for the given community type. These have subsubfolders which each contain two subfolders - `plots` and `stats`. `plots` contains a graph of abundances versus time. `stats` contains a full record of the abundance values versus time for each run. The file names are self-explanatory. 

Note: The files currently in the folders are only illustrative examples and have not been generated by a full model simulation. 
